(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{53:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a.n(c),s=a(24),r=a.n(s),i=(a(53),a(7)),o=a.n(i),l=a(12),u=a(10),d=(a(55),a(45)),j=a.n(d),h=a(46),b=a.n(h),f=a(26),p=a.n(f),v=a(20),O=a.n(v),m=(a(56),"#919191"),x={GHOST:a.p+"static/media/ghost.78a34c6f.png",USER:a.p+"static/media/user-green.cfde39fc.png"},g=a(29),N=a(18),w=(a(58),a(59),a(60),a(61),a(62),a(63),a(64),a(65),N.a.initializeApp({apiKey:"AIzaSyB27158ai7gdqKGFxpHtFQIfhnYtNbVfmE",authDomain:"whatsapp-2-a85f3.firebaseapp.com",projectId:"whatsapp-2-a85f3",storageBucket:"whatsapp-2-a85f3.appspot.com",messagingSenderId:"596771972223",appId:"1:596771972223:web:537307414d253749e28b4a",measurementId:"G-N8LSV7PKW8"}),N.a.firestore()),y={facebookLoginPopup:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new N.a.auth.FacebookAuthProvider,e.next=3,N.a.auth().signInWithPopup(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addUser:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.collection("User").doc(t.id).set({name:t.name,avatar:t.avatar},{merge:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getContactList:function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,w.collection("User").get();case 3:return e.sent.forEach((function(e){var c=e.data();e.id!==t&&a.push({id:e.id,name:c.name,avatar:c.avatar})})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUser:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,w.collection("User").doc(t).get();case 3:return e.next=5,e.sent.data();case 5:return c=e.sent,a={id:c.id,name:c.name,avatar:c.avatar},e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),newChat:function(){var e=Object(l.a)(o.a.mark((function e(t,a){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.collection("Chat").add({messages:[],users:[t.id,a.id]});case 2:return c=e.sent,w.collection("User").doc(t.id).update({chats:N.a.firestore.FieldValue.arrayUnion({chatId:c.id,title:a.name,image:a.avatar,with:[a.id]})}),w.collection("User").doc(a.id).update({chats:N.a.firestore.FieldValue.arrayUnion({chatId:c.id,title:t.name,image:t.avatar,with:[t.id]})}),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),onChatList:function(e,t){return w.collection("User").doc(e).onSnapshot((function(e){if(e.exists){var a=e.data();if(a.chats){var c=Object(g.a)(a.chats);c.sort((function(e,t){return void 0===e.lastMessageDate||void 0===t.lastMessageDate?-1:e.lastMessageDate.seconds<t.lastMessageDate.seconds?1:-1})),t(c)}}}))},onChatContent:function(e,t,a){return w.collection("Chat").doc(e).onSnapshot((function(e){if(e.exists){var c=e.data();console.log(c),t(c.messages),a(c.users)}}))},sendMessage:function(){var e=Object(l.a)(o.a.mark((function e(t,a,c,n,s){var r,i,l,u,d,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Date,w.collection("Chat").doc(t.chatId).update({messages:N.a.firestore.FieldValue.arrayUnion({type:c,author:a,body:n,date:r})}),e.t0=o.a.keys(s);case 3:if((e.t1=e.t0()).done){e.next=17;break}return i=e.t1.value,e.next=7,w.collection("User").doc(s[i]).get();case 7:if(l=e.sent,!(u=l.data()).chats){e.next=15;break}for(j in d=Object(g.a)(u.chats))d[j].chatId===t.chatId&&(d[j].lastMessage=n,d[j].lastMessageDate=r);return e.next=15,w.collection("User").doc(s[i]).update({chats:d});case 15:e.next=3;break;case 17:case"end":return e.stop()}}),e)})));return function(t,a,c,n,s){return e.apply(this,arguments)}}()},k=a(2),C=function(e){var t=e.active,a=e.chat,n=(e.setActiveChat,e.onClick),s=a.image,r=Object(c.useState)(""),i=Object(u.a)(r,2),o=i[0],l=i[1];Object(c.useEffect)((function(){if(a.lastMessageDate>0){var e=new Date(1e3*a.lastMessageDate.seconds),t=e.getHours(),c=e.getMinutes();c=c<10?"0"+c:c,l("".concat(t=t<10?"0"+t:t,":").concat(c))}}),[a]);return Object(k.jsxs)("div",{className:"contact-card  ".concat(t?"active":""),onClick:n,children:[Object(k.jsx)("img",{src:void 0===s||null===s||""===s?x.USER:s,className:"avatar"}),Object(k.jsxs)("div",{className:"lines",children:[Object(k.jsxs)("div",{className:"line",children:[Object(k.jsx)("div",{className:"name",children:a.title}),Object(k.jsx)("div",{className:"date",children:o})]}),Object(k.jsx)("div",{className:"line",children:Object(k.jsx)("div",{className:"lastMessage",children:Object(k.jsx)("p",{children:a.lastMessage})})})]})]})},S=(a(67),function(){return Object(k.jsxs)("div",{className:"intro--view",children:[Object(k.jsx)("h1",{children:" Seja Bem Vindo ao Whatsapp 2 "}),Object(k.jsx)("img",{src:x.GHOST,alt:"ghost",className:"intro--image"}),Object(k.jsx)("h2",{children:" Este clone do whatssap vai al\xe9m do visual, teste o chat, inicie uma conversa com algum usu\xe1rio "}),Object(k.jsx)("h5",{children:"...pedro conteudos ):-()"})]})}),U=(a(68),a(39)),I=a.n(U),E=a(41),M=a.n(E),F=a(40),D=a.n(F),L=a(42),R=a.n(L),H=a(43),P=a.n(H),A=a(37),V=a.n(A),B=(a(69),function(e){var t=e.user,a=e.message,n=(e.key,Object(c.useState)("")),s=Object(u.a)(n,2),r=s[0],i=s[1];return Object(c.useEffect)((function(){if(a.date>0){var e=new Date(1e3*a.date.seconds),t=e.getHours(),c=e.getMinutes();c=c<10?"0"+c:c,i("".concat(t=t<10?"0"+t:t,":").concat(c))}}),[a]),Object(k.jsx)("div",{className:"message-line",style:{justifyContent:t.id===a.author?"flex-end":"flex-start"},children:Object(k.jsxs)("div",{className:"message-item",style:{backgroundColor:t.id===a.author?"#DCF8C6":"flex-start"},children:[Object(k.jsx)("div",{className:"message",children:Object(k.jsx)("p",{className:"text",children:a.body})}),Object(k.jsx)("div",{className:"message-data",children:r})]})})}),G=function(e){var t=e.chat,a=e.user,n=Object(c.useState)(!1),s=Object(u.a)(n,2),r=s[0],i=s[1],o=Object(c.useState)(""),l=Object(u.a)(o,2),d=l[0],j=l[1],h=Object(c.useState)(!1),b=Object(u.a)(h,2),f=b[0],v=b[1],g=Object(c.useState)([]),N=Object(u.a)(g,2),w=N[0],C=N[1],S=Object(c.useState)([]),U=Object(u.a)(S,2),E=U[0],F=U[1],L=Object(c.useRef)(),H=null,A=window.SpeechRecognition||window.webkitSpeechRecognition;void 0!==A&&(H=new A),Object(c.useEffect)((function(){L.current.scrollHeight>L.current.offsetHeight&&(L.current.scrollTop=L.current.scrollHeight-L.current.offsetHeight)}),[w]),Object(c.useEffect)((function(){C([]);y.onChatContent(t.chatId,C,F)}),[t.chatId]);var G=function(){""!==d&&(console.log(""),console.log("users: "),console.log(E),console.log(""),y.sendMessage(t,a.id,"text",d,E),j(""),i(!1))};return Object(k.jsxs)("div",{className:"chat-window",children:[Object(k.jsxs)("header",{children:[Object(k.jsxs)("div",{className:"info",children:[Object(k.jsx)("img",{className:"perfil-image",src:void 0===t.image||null===t.image||""===t.image?x.USER:t.image}),Object(k.jsx)("div",{className:"name",children:t.title})]}),Object(k.jsxs)("div",{className:"button-group",children:[Object(k.jsx)("div",{className:"button",children:Object(k.jsx)(O.a,{style:{color:m}})}),Object(k.jsx)("div",{className:"button",children:Object(k.jsx)(I.a,{style:{color:m}})}),Object(k.jsx)("div",{className:"button",children:Object(k.jsx)(p.a,{style:{color:m}})})]})]}),Object(k.jsx)("div",{ref:L,className:"chat-body",children:w.map((function(e,t){return Object(k.jsx)(B,{user:a,message:e},t)}))}),Object(k.jsx)("section",{className:"emoji-area",style:{height:r?"250px":"0px"},children:Object(k.jsx)(V.a,{onEmojiClick:function(e,t){j(""+d+t.emoji)}})}),Object(k.jsxs)("footer",{className:"chat-input",children:[Object(k.jsx)("div",{className:"left",children:Object(k.jsxs)("div",{className:"button-group",style:{width:r?80:40},children:[Object(k.jsx)("div",{className:"button",onClick:function(){i(!1)},children:Object(k.jsx)(D.a,{style:{color:m,width:r?40:0}})}),Object(k.jsx)("div",{className:"button",onClick:function(){i(!0)},children:Object(k.jsx)(M.a,{style:{color:r?"#009688":m,marginLeft:r?0:-40}})})]})}),Object(k.jsx)("div",{className:"center",children:Object(k.jsx)("input",{type:"search",placeholder:"Pedro Digita\xe7\xf5es >:[]",value:d,onChange:function(e){return j(e.target.value)},onKeyUp:function(e){13==e.keyCode&&G()}})}),Object(k.jsx)("div",{className:"right",children:Object(k.jsx)("div",{className:"button-group",children:""!==d?Object(k.jsx)("div",{className:"button",onClick:G,children:Object(k.jsx)(R.a,{style:{color:m}})}):Object(k.jsx)("div",{className:"button",onClick:function(){null!==H&&(H.onstart=function(){v(!0)},H.onend=function(){v(!1)},H.onresult=function(e){j(d+" "+e.result[0][0].transcript)},H.start())},children:Object(k.jsx)(P.a,{style:{color:f?"#126ECE":m}})})})})]})]})},K=(a(75),a(44)),W=a.n(K),z=function(e){var t=e.contacts,a=e.user,n=e.isShowing,s=e.setShowing,r=e.setActiveChat,i=Object(c.useState)(t),d=Object(u.a)(i,2),j=d[0],h=d[1];Object(c.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===a){e.next=5;break}return e.next=3,y.getContactList(a.id);case 3:t=e.sent,h(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]);var b=function(){var e=Object(l.a)(o.a.mark((function e(c){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.newChat(a,c);case 2:return n=e.sent,t.push(c),e.next=6,r(n);case 6:f();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){s(!1)};return Object(k.jsxs)("selection",{className:"NewChatPicker",style:{left:n?"0px":"-415px"},children:[Object(k.jsxs)("header",{children:[Object(k.jsx)("div",{className:"button-group",children:Object(k.jsx)("div",{className:"button",onClick:f,children:Object(k.jsx)(W.a,{style:{color:"#FFFFFF"}})})}),Object(k.jsx)("div",{className:"title",children:Object(k.jsx)("p",{children:"Novo Chat"})})]}),Object(k.jsx)("section",{className:"chatlist",children:j.map((function(e,t){return Object(k.jsxs)("div",{className:"contact-card",onClick:function(){return b(e)},children:[Object(k.jsx)("img",{className:"avatar",src:void 0===e.avatar||null===e.avatar||""===e.avatar?x.USER:e.avatar}),Object(k.jsx)("div",{className:"name",children:Object(k.jsx)("p",{children:e.name})})]},t)}))})]})},T=(a(76),function(e){var t=e.onReceive,a=function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.facebookLoginPopup();case 2:(a=e.sent)?t(a.user):alert("Error!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"login",children:Object(k.jsx)("button",{onClick:a,children:" Login With Facebook "})})});var q=function(){var e=n.a.useState([]),t=Object(u.a)(e,2),a=t[0],s=t[1],r=n.a.useState(null),i=Object(u.a)(r,2),d=i[0],h=i[1],f=Object(c.useState)({}),v=Object(u.a)(f,2),x=v[0],g=v[1],N=Object(c.useState)(!1),w=Object(u.a)(N,2),U=w[0],I=w[1],E=m;Object(c.useEffect)((function(){if(null!==d)return y.onChatList(d.id,s)}),[d]);var M=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t.uid,name:t.displayName,avatar:t.photoURL},e.next=3,y.addUser(a);case 3:h(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===d?Object(k.jsx)(T,{onReceive:M}):Object(k.jsxs)("div",{className:"app-window",children:[Object(k.jsxs)("div",{className:"sidebar",children:[Object(k.jsx)(z,{contacts:a,user:d,isShowing:U,setShowing:I,setActiveChat:g}),Object(k.jsxs)("header",{children:[Object(k.jsx)("div",{children:Object(k.jsx)("img",{src:d.avatar,className:"img-perfil"})}),Object(k.jsxs)("div",{className:"button-group",children:[Object(k.jsx)("div",{className:"button",children:Object(k.jsx)(j.a,{style:{color:E}})}),Object(k.jsx)("div",{className:"button",onClick:function(){I(!0)},children:Object(k.jsx)(b.a,{style:{color:E}})}),Object(k.jsx)("div",{className:"button",children:Object(k.jsx)(p.a,{style:{color:E}})})]})]}),Object(k.jsx)("div",{className:"search-area",children:Object(k.jsxs)("div",{className:"search-input",children:[Object(k.jsx)(O.a,{fontSize:"small",style:{color:E}}),Object(k.jsx)("input",{type:"search",placeholder:"Pedro pesquisas >:()..."})]})}),Object(k.jsx)("div",{className:"chatlist",children:a.map((function(e,t){return Object(k.jsx)(C,{chat:e,setActiveChat:g,onClick:function(){return g(a[t])},active:x.chatId===e.chatId},t)}))})]}),Object(k.jsxs)("div",{className:"content-area",children:[void 0!==x.chatId&&Object(k.jsx)(G,{chat:x,user:d}),void 0===x.chatId&&Object(k.jsx)(S,{})]})]})};r.a.render(Object(k.jsx)(n.a.StrictMode,{children:Object(k.jsx)(q,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.a2e4e641.chunk.js.map